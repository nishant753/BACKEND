<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>UniShelf Library</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <!-- Font Awesome for icons -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
  <!-- Animate.css for subtle animations -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"/>
</head>
<body>
  <!-- Header with profile icon -->
  <header>
    <div class="header-title">UniShelf Library</div>
    <div class="profile-icon" tabindex="0" aria-label="Open user sidebar" role="button">
      <i class="fas fa-user"></i>
    </div>
  </header>

  <!-- Right Side Navigation -->
  <div class="sidebar" id="sidebarDrawer" aria-label="User profile and navigation" role="navigation">
    <button class="close-btn" id="closeSidebar" aria-label="Close sidebar"><i class="fas fa-times"></i></button>
    <div class="user-details">
      <div class="user-avatar">
        <img src="/avatars/default-user.png" alt="Profile">
      </div>
      <% if (currentUser) { %>
        <h3><%= currentUser.name %></h3>
        <p><i class="fas fa-envelope"></i> <%= currentUser.email %></p>
        <p><i class="fas fa-user-tag"></i> <%= currentUser.role || 'Member' %></p>
        <p><i class="fas fa-calendar-alt"></i> Joined: <%= currentUser.joinedDate || 'Jan 1, 2024' %></p>
      <% } else { %>
        <h3>Guest</h3>
        <p><i class="fas fa-envelope"></i> Not logged in</p>
        <p><i class="fas fa-user-tag"></i> Visitor</p>
        <p><i class="fas fa-calendar-alt"></i> Joined: -</p>
      <% } %>
      
      
    </div>
    <% if (currentUser) { %>
    <nav class="nav-links" aria-label="Sidebar navigation">
      <a href="/"><i class="fas fa-home"></i> Home</a>
      <a href="/create"><i class="fas fa-add"></i> Add new book</a>
      <a href="/view"><i class="fas fa-book"></i> Books</a>
      <a href="/mybook"><i class="fas fa-book-reader"></i> My Borrowed Books</a>
      <a href="/resources"><i class="fas fa-laptop"></i> E-Resources</a>
     

    </nav>
    
      <form action="/logout" method="POST">
        <button class="logout-btn" type="submit"><i class="fas fa-sign-out-alt"></i> Logout</button>
      </form>
    <% } else { %>
      <a href="/login" class="logout-btn" style="text-align:center; display:block;">
        <i class="fas fa-sign-in-alt"></i> Login
      </a>
    <% } %>
    
  </div>

  <div class="container" role="main">
    <!-- Hero Section -->
    <section class="hero animate__animated animate__fadeIn">
    <h1>Welcome to UniShelf, <%= currentUser ? currentUser.name : 'Guest' %>!</h1>
      </h1>
      <p>Your digital gateway to books, learning, and community. Discover new arrivals, join events, and connect with fellow readers.</p>
      <form class="search-bar" role="search" aria-label="Search books and resources">
        <input type="text" placeholder="Search books, authors, or topics..." aria-label="Search">
        <button type="submit"><i class="fas fa-search"></i></button>
      </form>
      <button class="cta-btn">Join the Library</button>
    </section>
    <!-- Announcements -->
    <div class="announcements animate__animated animate__fadeInLeft" id="announcementBar">
      <i class="fas fa-bullhorn"></i>
      <span>Library Week: Free workshops and author talks, May 10â€“17!</span>
      <button class="close-announcement" aria-label="Dismiss announcement" onclick="document.getElementById('announcementBar').style.display='none';"><i class="fas fa-times"></i></button>
    </div>
    <!-- Quick Access Tiles -->
    <div class="quick-links">
      <a href="/view" class="quick-link-card"><i class="fas fa-book"></i> Browse Books</a>
      <a href="/mybook" class="quick-link-card"><i class="fas fa-book-reader"></i> My Borrowed Books</a>
      <a href="/events" class="quick-link-card"><i class="fas fa-calendar-alt"></i> Events</a>
      <a href="/resources" class="quick-link-card"><i class="fas fa-laptop"></i> E-Resources</a>
      <a href="/contact" class="quick-link-card"><i class="fas fa-envelope"></i> Contact Us</a>
      
    </div>
    <!-- Carousel for Featured Books -->
    <div style="position:relative;">
      <button class="carousel-nav left" aria-label="Scroll left" type="button" onclick="scrollCarousel(-1)"><i class="fas fa-chevron-left"></i></button>
      <div class="carousel" aria-label="New Arrivals" id="carousel">
        <div class="carousel-card animate__animated animate__fadeInUp">
          <img src="1.jpg" alt="Atomic Habits">
          <h3>Death in Venice</h3>
          <p>by Thomas Mann</p>
          <div class="book-desc">"Death in Venice" is a 1912 novella by Thomas Mann about Gustav von Aschenbach, a renowned writer, who travels to Venice and becomes obsessed with a young Polish boy, Tadzio.</div>
        </div>
        <div class="carousel-card animate__animated animate__fadeInUp">
          <img src="2.jpg" alt="The Alchemist">
          <h3>The Alchemist</h3>
          <p>by Paulo Coelho</p>
          <div class="book-desc">A philosophical story about following your dreams and listening to your heart.</div>
        </div>
        <div class="carousel-card animate__animated animate__fadeInUp">
          <img src="3.jpg" alt="Educated">
          <h3>Educated</h3>
          <p>by Tara Westover</p>
          <div class="book-desc">A memoir of a woman who, kept out of school, leaves her survivalist family and earns a PhD from Cambridge.</div>
        </div>
        <div class="carousel-card animate__animated animate__fadeInUp">
          <img src="4.jpg" alt="Sapiens">
          <h3>Sapiens</h3>
          <p>by Yuval Noah Harari</p>
          <div class="book-desc">A brief history of humankind, from the Stone Age to the 21st century.</div>
        </div>
        <div class="carousel-card animate__animated animate__fadeInUp">
          <img src="5.jpg" alt="fault">
          <h3>The Fault in Our Stars</h3>
          <p>by John Green</p>
          <div class="book-desc">The Fault in Our Stars by John Green is a young adult fiction novel that narrates the story of a 16-year-old girl who is diagnosed with cancer.</div>
        </div>
      </div>
      <button class="carousel-nav right" aria-label="Scroll right" type="button" onclick="scrollCarousel(1)"><i class="fas fa-chevron-right"></i></button>
    </div>
    <!-- Tabs for Resources -->
    <div class="tabs" id="tabs">
      <button class="tab active" data-tab="books">Books</button>
      <button class="tab" data-tab="journals">Journals</button>
      <button class="tab" data-tab="events">Events</button>
    </div>
    <div class="tab-content active" id="books">
      <p>Explore our vast collection of physical and digital books. Use the search above or browse by genre.</p>
    </div>
    <div class="tab-content" id="journals">
      <p>Access academic journals, magazines, and periodicals. Filter by subject or publication date.</p>
    </div>
    <div class="tab-content" id="events">
      <p>Stay updated on upcoming workshops, book clubs, and author talks. Register early to reserve your spot!</p>
    </div>
    <!-- Social Media Links -->
    <div class="social-links">
      <a href="#" aria-label="Follow us on Facebook"><i class="fab fa-facebook"></i></a>
      <a href="#" aria-label="Follow us on Twitter"><i class="fab fa-twitter"></i></a>
      <a href="#" aria-label="Follow us on Instagram"><i class="fab fa-instagram"></i></a>
    </div>
  </div>

  <script>
  // Sidebar open/close logic (improved)
  (function() {
    const profileIcon = document.querySelector('.profile-icon');
    const sidebarDrawer = document.getElementById('sidebarDrawer');
    const closeSidebarBtn = document.getElementById('closeSidebar');

    function openSidebar() {
      sidebarDrawer.classList.add('open');
      document.body.style.overflow = 'hidden';
      setTimeout(() => {
        const focusable = sidebarDrawer.querySelector('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])');
        if (focusable) focusable.focus();
      }, 100);
    }
    function closeSidebar() {
      sidebarDrawer.classList.remove('open');
      document.body.style.overflow = '';
      if (profileIcon) profileIcon.focus();
    }

    if (profileIcon) {
      profileIcon.addEventListener('click', openSidebar);
      profileIcon.addEventListener('keydown', function(e) {
        if (e.key === 'Enter' || e.key === ' ') {
          e.preventDefault();
          openSidebar();
        }
      });
    }
    if (closeSidebarBtn) {
      closeSidebarBtn.addEventListener('click', closeSidebar);
    }
    document.addEventListener('mousedown', function(e) {
      if (
        sidebarDrawer.classList.contains('open') &&
        !sidebarDrawer.contains(e.target) &&
        !profileIcon.contains(e.target)
      ) {
        closeSidebar();
      }
    });
    document.addEventListener('keydown', function(e) {
      if (e.key === 'Escape' && sidebarDrawer.classList.contains('open')) {
        closeSidebar();
      }
    });
    sidebarDrawer.addEventListener('keydown', function(e) {
      if (e.key === 'Tab') {
        const focusableEls = sidebarDrawer.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])');
        const firstEl = focusableEls[0];
        const lastEl = focusableEls[focusableEls.length - 1];
        if (e.shiftKey) {
          if (document.activeElement === firstEl) {
            e.preventDefault();
            lastEl.focus();
          }
        } else {
          if (document.activeElement === lastEl) {
            e.preventDefault();
            firstEl.focus();
          }
        }
      }
    });
  })();

  // Tab switching logic
  const tabs = document.querySelectorAll('.tab');
  const tabContents = document.querySelectorAll('.tab-content');
  tabs.forEach(tab => {
    tab.addEventListener('click', () => {
      tabs.forEach(t => t.classList.remove('active'));
      tab.classList.add('active');
      tabContents.forEach(tc => tc.classList.remove('active'));
      document.getElementById(tab.dataset.tab).classList.add('active');
    });
  });

  // Carousel navigation logic
  function scrollCarousel(direction) {
    const carousel = document.getElementById('carousel');
    const card = carousel.querySelector('.carousel-card');
    if (!card) return;
    const scrollAmount = card.offsetWidth + 18;
    carousel.scrollBy({ left: direction * scrollAmount, behavior: 'smooth' });
  }
  </script>
</body>
</html>
<style>
  body {
    font-family: 'Segoe UI', Arial, sans-serif;
    background: #f7fafc;
    margin: 0;
    min-height: 100vh;
    transition: margin-right 0.4s;
  }
  :focus-visible {
    outline: 2px solid #67d6bc;
    outline-offset: 2px;
  }
  .sidebar {
    position:fixed;
    top: 0;
    right: -333px;
    width: 340px;
    height: 100vh;
    background: rgba(255,255,255,0.92);
    box-shadow: -8px 0 32px rgba(25, 118, 210, 0.18);
    z-index: 9999;
    transition: right 0.35s cubic-bezier(.4,0,.2,1);
    padding: 2.5rem 1.7rem 1.7rem 1.7rem;
    display: flex;
    flex-direction: column;
    gap: 2.2rem;
    border-top-left-radius: 22px;
    border-bottom-left-radius: 22px;
    backdrop-filter: blur(12px);
    overflow-y: auto;
  }
  .sidebar.open {
    right: 0;
  }
  .sidebar .close-btn {
    position: absolute;
    top: 1.3rem;
    right: 1.3rem;
    font-size: 1.7rem;
    color:#67d6bc;
    background: none;
    border: none;
    cursor: pointer;
    transition: color 0.2s;
  }
  .sidebar .close-btn:hover {
    color: #22675e;
    transform: scale(1.13);
  }
  .sidebar .user-details {
    text-align: center;
    margin-bottom: 1rem;
  }
  .sidebar .user-avatar {
    width: 86px;
    height: 86px;
    border-radius: 50%;
    color: #fff;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 2.6rem;
    margin: 0 auto 1rem auto;
    border: 3px solid #fff;
    box-shadow: 0 2px 16px rgba(25, 118, 210, 0.19);
    overflow: hidden;
  }
  .sidebar .user-avatar img {
    width: 100%;
    height: 100%;
    border-radius: 50%;
    object-fit: cover;
  }
  .sidebar .user-details h3 {
    margin: 0.5rem 0 0.2rem 0;
    font-size: 1.35rem;
    color:#6bb7a5;
    font-weight: 700;
  }
  .sidebar .user-details p {
    margin: 0.1rem 0;
    color: #444;
    font-size: 1.05rem;
  }
  .sidebar .user-details i {
    color:#67d6bc;
    margin-right: 0.3rem;
    margin-bottom: 0;
  }
  .sidebar .nav-links {
    display: flex;
    flex-direction: column;
    margin-top:0px;
  }
  .sidebar .nav-links a {
    color: #67d6bc;
    font-weight: 600;
    text-decoration: none;
    font-size: 1.13rem;
    display: flex;
    align-items: center;
    gap: 0.7rem;
    padding: 0.45rem 0.3rem;
    border-radius: 6px;
    transition: color 0.18s, background 0.18s;
  }
  .sidebar .nav-links a:hover {
    color: #fff;
    background: linear-gradient(90deg,#67d6bc 0%,#579d8d 100%);
  }
  .sidebar .logout-btn {

    background: linear-gradient(90deg,#67d6bc 0%,#579d8d 100%);
    color: #fff;
    border: none;
    border-radius: 6px;
    padding: 0.8rem 1.4rem;
    font-size: 1.08rem;
    font-weight: 700;
    cursor: pointer;
    box-shadow: 0 2px 8px rgba(25, 118, 210, 0.13);
    transition: background 0.2s, transform 0.17s;
    width: 100%;
    margin-bottom: 50px;
  }
  .sidebar .logout-btn:hover {
    background: linear-gradient(90deg, #67d6bc 0%, #579d8d 100%);
    transform: translateY(-2px) scale(1.04);
  }
  @media (max-width: 900px) {
    .container, header {
      margin-right: 0 !important;
    }
    .sidebar {
      width: 95vw;
      padding: 2rem 0.7rem 1.2rem 0.7rem;
      border-radius: 0;
    }
  }
  /* Header */
  header {
    background: linear-gradient(90deg, #67d6bc 0%, #22675e 100%);
    color: #fff;
    padding: 1.5rem 2rem 1rem 2rem;
    display: flex;
    align-items: center;
    justify-content: space-between;
    border-bottom-left-radius: 18px;
    border-bottom-right-radius: 18px;
    box-shadow: 0 4px 18px rgba(0, 0, 0, 0.15);
  }
  .header-title {
    font-size: 2.2rem;
    font-weight: 600;
    font-family: 'Pacifico', cursive;
    letter-spacing: 2px;
    margin: 0;
    color: #fff;
    text-shadow: 1px 2px 4px rgba(0, 0, 0, 0.2);
  }
  .profile-icon {
    width:38px;
    height:38px;
    border-radius: 50%;
    background: #fff;
    color: #54d7b6;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 1.3rem;
    cursor: pointer;
    border: 2px solid #fff;
    box-shadow: 0 2px 8px rgba(25, 118, 210, 0.14);
    margin-right:30px;
  }
  .container {
    max-width: 1000px;
    margin: 2rem auto;
    padding: 1.5rem;
    border-radius: 16px;
    background: #fff;
    box-shadow: 0 2px 12px rgba(25, 118, 210, 0.10);
  }
  /* Hero section, quick links, carousel, tabs, announcements, social links... (unchanged from your paste) */
  .hero {
    background: linear-gradient(90deg, #e3f0fc 0%, #67d6bc 100%);
    border-radius: 14px;
    padding: 2.2rem 2rem 2rem 2rem;
    text-align: center;
    margin-bottom: 2.2rem;
    position: relative;
    overflow: hidden;
  }
  .hero h1 {
    font-size: 2.3rem;
    color: #22675e;
    margin-bottom: 0.3rem;
    animation: fadeInDown 1s;
  }
  .hero p {
    font-size: 1.18rem;
    color: #444;
    margin-bottom: 1.1rem;
    animation: fadeInUp 1.2s;
  }
  .hero .cta-btn {
    background: #67d6bc;
    color: #fff;
    border: none;
    border-radius: 6px;
    padding: 0.9rem 2.1rem;
    font-size: 1.1rem;
    font-weight: 600;
    cursor: pointer;
    transition: background 0.2s, transform 0.17s;
    box-shadow: 0 2px 8px rgba(25, 118, 210, 0.13);
    margin-top: 0.8rem;
    animation: fadeIn 1.4s;
    animation: pulse 2.4s infinite;
  }
  .hero .cta-btn:hover {
    background: #22675e;
    transform: scale(1.04);
  }
  @keyframes pulse {
    0% { box-shadow: 0 0 0 0 #67d6bc44; }
    70% { box-shadow: 0 0 0 10px #67d6bc00; }
    100% { box-shadow: 0 0 0 0 #67d6bc00; }
  }
  .search-bar {
    display: flex;
    justify-content: center;
    margin: 1.2rem 0 0.8rem 0;
    gap: 0.5rem;
    animation: fadeIn 1.2s;
  }
  .search-bar input {
    padding: 0.7rem 1rem;
    border-radius: 6px;
    border: 1px solid #67d6bc;
    font-size: 1rem;
    width: 60vw;
    max-width: 340px;
  }
  .search-bar button {
    background: #67d6bc;
    color: #fff;
    border: none;
    border-radius: 6px;
    padding: 0.7rem 1.2rem;
    cursor: pointer;
    font-size: 1.1rem;
    transition: background 0.18s;
  }
  .search-bar button:hover {
    background: #22675e;
  }
  .quick-links {
    display: flex;
    justify-content: center;
    gap: 1.2rem;
    margin-bottom: 2.3rem;
    flex-wrap: wrap;
  }
  .quick-link-card {
    background: linear-gradient(135deg, #67d6bc 0%, #e3f0fc 100%);
    color: #22675e;
    border-radius: 12px;
    padding: 1.1rem 2.1rem;
    font-size: 1.18rem;
    font-weight: 600;
    text-decoration: none;
    display: flex;
    align-items: center;
    gap: 0.7rem;
    box-shadow: 0 2px 12px rgba(25, 118, 210, 0.09);
    transition: background 0.19s, transform 0.17s, box-shadow 0.2s;
    position: relative;
    overflow: hidden;
    cursor: pointer;
  }
  .quick-link-card i {
    font-size: 1.3rem;
  }
  .quick-link-card:hover {
    background: linear-gradient(135deg, #e3f0fc 0%, #67d6bc 100%);
    color: #15504a;
    transform: translateY(-4px) scale(1.03);
    box-shadow: 0 4px 20px rgba(25, 118, 210, 0.15);
  }
  .carousel {
    display: flex;
    overflow-x: auto;
    gap: 1.2rem;
    margin-bottom: 2.2rem;
    padding-bottom: 1rem;
    scrollbar-width: thin;
    align-items: flex-start;
    position: relative;
  }
  .carousel::-webkit-scrollbar {
    height: 8px;
    background: #e3f0fc;
  }
  .carousel::-webkit-scrollbar-thumb {
    background: #67d6bc;
    border-radius: 8px;
  }
  .carousel-card {
    min-width: 180px;
    background: #fff;
    border-radius: 10px;
    box-shadow: 0 2px 10px rgba(25, 118, 210, 0.07);
    padding: 1rem 1.1rem 0.8rem 1.1rem;
    text-align: center;
    transition: box-shadow 0.2s, transform 0.17s;
    animation: fadeInUp 1.1s;
    position: relative;
  }
  .carousel-card img {
    width: 80px;
    height: 110px;
    object-fit: cover;
    border-radius: 5px;
    margin-bottom: 0.7rem;
    box-shadow: 0 1px 6px rgba(25, 118, 210, 0.08);
  }
  .carousel-card h3 {
    font-size: 1.02rem;
    margin: 0.2rem 0 0.1rem 0;
    color: #67d6bc;
    font-weight: 700;
  }
  .carousel-card p {
    font-size: 0.97rem;
    color: #444;
    margin: 0 0 0.2rem 0;
  }
  .carousel-card .book-desc {
    display: none;
    position: absolute;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(103, 214, 188, 0.97);
    color: #22675e;
    font-size: 0.93rem;
    border-radius: 0 0 10px 10px;
    padding: 0.6rem 0.5rem;
    z-index: 2;
    transition: opacity 0.18s;
    opacity: 0;
  }
  .carousel-card:hover .book-desc {
    display: block;
    opacity: 1;
  }
  .tabs {
    display: flex;
    gap: 0.8rem;
    margin-bottom: 1.2rem;
    justify-content: center;
  }
  .tab {
    padding: 0.6rem 1.2rem;
    border-radius: 6px 6px 0 0;
    background: #e3f0fc;
    color: #22675e;
    font-weight: 600;
    cursor: pointer;
    border: none;
    outline: none;
    transition: background 0.18s, color 0.18s;
  }
  .tab.active, .tab:hover {
    background: #67d6bc;
    color: #fff;
  }
  .tab-content {
    display: none;
    background: #f7fafc;
    border-radius: 0 0 10px 10px;
    padding: 1.2rem;
    box-shadow: 0 2px 8px rgba(25, 118, 210, 0.07);
  }
  .tab-content.active {
    display: block;
    animation: fadeIn 0.8s;
  }
  .announcements {
    background: #e3f0fc;
    border-radius: 8px;
    padding: 1rem 1.2rem;
    margin-bottom: 1.5rem;
    font-size: 1.05rem;
    color: #22675e;
    display: flex;
    align-items: center;
    gap: 0.7rem;
    animation: fadeInLeft 1.1s;
    position: relative;
  }
  .announcements i {
    color: #67d6bc;
    font-size: 1.2rem;
  }
  .announcements .close-announcement {
    position: absolute;
    top: 0.6rem;
    right: 1rem;
    background: none;
    border: none;
    color: #67d6bc;
    font-size: 1.1rem;
    cursor: pointer;
  }
  .social-links {
    display: flex;
    gap: 1.1rem;
    justify-content: center;
    margin-top: 1.2rem;
  }
  .social-links a {
    color: #67d6bc;
    font-size: 1.5rem;
    transition: color 0.18s;
  }
  .social-links a:hover {
    color: #22675e;
  }
  @media (max-width: 700px) {
    .container { padding: 0.5rem; }
    .hero { padding: 1.1rem 0.6rem; }
    .quick-links { flex-direction: column; gap: 0.7rem; }
    .carousel { gap: 0.7rem; }
    header {
      flex-direction: column;
      align-items: flex-start;
      padding: 1rem;
    }
    .header-title {
      font-size: 1.4rem;
    }
    .profile-icon {
      margin: 1rem 0 0 0;
    }
  }
  /* Carousel navigation buttons */
  .carousel-nav {
    position: absolute;
    top: 50%;
    transform: translateY(-50%);
    background: #67d6bc;
    color: #fff;
    border: none;
    border-radius: 50%;
    width: 34px;
    height: 34px;
    font-size: 1.2rem;
    cursor: pointer;
    box-shadow: 0 2px 8px rgba(25, 118, 210, 0.13);
    z-index: 10;
    transition: background 0.2s;
    opacity: 0.8;
  }
  .carousel-nav:hover {
    background: #22675e;
  }
  .carousel-nav.left {
    left: -18px;
  }
  .carousel-nav.right {
    right: -18px;
  }</style>
